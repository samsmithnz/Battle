using Battle.Logic.Characters;
using Battle.Logic.Encounters;
using Battle.Logic.GameController;
using Battle.Logic.Map;
using Battle.Logic.SaveGames;
using Battle.Logic.Utility;
using Battle.Tests.Characters;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Collections.Generic;
using System.IO;
using System.Numerics;
using System.Reflection;

namespace Battle.Tests.Map
{
    [TestClass]
    [TestCategory("L1")]
    public class TeamFieldOfViewTests
    {
        private string _rootPath;

        [TestInitialize]
        public void GameSerializationStartUp()
        {
            _rootPath = Path.GetDirectoryName(Assembly.GetEntryAssembly().Location);
        }

        [TestMethod]
        public void TeamMultipleCharactersMovingFOVTest()
        {
            //Arrange
            int xMax = 20;
            int zMax = 20;
            Mission mission = new Mission
            {
                Map = MapCore.InitializeMap(xMax, 1, zMax)
            };
            Character fred = CharacterPool.CreateFredHero(mission.Map, new Vector3(1, 0, 1));
            fred.MobilityRange = 5;
            fred.FOVRange = 5;
            fred.SetLocation(new Vector3(0, 0, 1), mission.Map);
            Character harry = CharacterPool.CreateHarryHeroSidekick(mission.Map, new Vector3(0, 0, 1));
            harry.MobilityRange = 5;
            harry.FOVRange = 5;
            harry.SetLocation(new Vector3(1, 0, 0), mission.Map);
            Team team1 = new Team()
            {
                Name = "Good guys",
                Characters = new List<Character>() { fred, harry }
            };
            mission.Teams.Add(team1);

            //Check before we move
            FieldOfView.UpdateCharacterFOV(mission.Map, fred);
            string fov0MapString = MapCore.GetMapStringWithMapMask(mission.Map, fred.FOVMap);
            string expectedFov0MapString = @"
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. P . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
";
            Assert.AreEqual(expectedFov0MapString, fov0MapString);

            Vector3 location = new Vector3(0, 0, 13);
            PathFindingResult pathFindingResult = PathFinding.FindPath(fred.Location, location, mission.Map);
            CharacterMovement.MoveCharacter(fred, mission.Map, pathFindingResult, mission.RandomNumbers, null, team1);

            string fov1MapString = MapCore.GetMapStringWithMapMask(mission.Map, fred.FOVMap);
            string expectedFov1MapString = @"
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
P . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
";
            Assert.AreEqual(expectedFov1MapString, fov1MapString);
        }

        [TestMethod]
        public void TeamMultipleCharactersFOVTest()
        {
            //Arrange
            string path = _rootPath + @"\SaveGames\Saves\SaveFOV002.json";

            //Act
            string fileContents;
            using (var streamReader = new StreamReader(path))
            {
                fileContents = streamReader.ReadToEnd();
            }
            Mission mission = GameSerialization.LoadGame(fileContents);
            FieldOfView.UpdateTeamFOV(mission.Map, mission.Teams[0]);
            string fov1MapString = MapCore.GetMapStringWithMapMask(mission.Map, mission.Teams[0].Characters[0].FOVMap);
            string fov2MapString = MapCore.GetMapStringWithMapMask(mission.Map, mission.Teams[0].Characters[1].FOVMap);
            string fov3MapString = MapCore.GetMapStringWithMapMask(mission.Map, mission.Teams[0].Characters[2].FOVMap);
            string teamFovMapstring = MapCore.GetMapStringWithMapMask(mission.Map, mission.Teams[0].FOVMap);
            //?mission.Map[29, 0, 0]
            //"□"
            //? mission.Teams[0].Characters[2].FOVMap[29, 0, 0]
            //""
            //? mission.Teams[0].Characters[2].FOVMap[31, 0, 0]
            //"░"

            //Assert
            Assert.IsNotNull(mission);
            Assert.IsNotNull(mission.Teams[0].FOVMap);


            //test individual FOV's
            string expectedFov1MapString = @"
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . □ . □ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . . . . ▓ ░ . . ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . . . . ░ . . ▓ ▓ . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . . . ▓ ░ . . ■ ▓ . . ░ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . . . ▓ ░ . . . . . . ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . . ▓ . . . ▓ . . ░ . . ▓ ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . . ░ . . . . . . ■ . ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . . ░ □ . ▓ . . □ . . ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ▓ ░ . . ■ . . . . ■ ▓ ░ . . ▓ ▓ ■ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . □ ▓ . . . . . . . . ▓ ▓ . . ▓ ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ░ . . . . . . . . ▓ . . . ▓ . . . ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ░ . . . . . . . ▓ ░ . . ▓ . P □ ▓ ▓ . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ■ . . . . . . . . . . ▓ ░ . □ ▓ . . . ▓ ░ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
■ . . . ▓ . . . . . . . ▓ . . ▓ . . . ▓ . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ . . . . . . ▓ . . ▓ . . . ▓ . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . ▓ . □ ▓ . . . ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ■ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . ▓ . . ▓ . . ■ . . ▓ ▓ ▓ ▓ ▓ . . . □ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . □ . . . ▓ . . ▓ . . . . ░ ▓ ▓ ▓ ▓ ▓ . . . . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ■ . . . . . □ . ▓ □ . . □ ░ ▓ ▓ ▓ ▓ . . . . . . . . ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. P . . . . . . . . ▓ . . . . ▓ ▓ ▓ ▓ . . . . . . . . . □ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . ■ . ▓ . . . . ▓ ▓ ▓ . . . . . . . . . . ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . □ □ . . ■ . . . ░ ▓ ▓ ▓ . . . . . . . . ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . ▓ ▓ ▓ . . . . . . . . ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ . □ . . . □ ▓ ■ . . . . . . . ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . □ . . . □ . . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ . □ . ■ . . . . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . ■ ■ . . . ■ ▓ . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. P . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . P . . . . . . . . . . □ . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
";
            string expectedFov2MapString = @"
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ▓ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ▓ ▓ ░ ░ ░ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ▓ ░ ░ ▓ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ▓ ░ ▓ ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ▓ ▓ ░ ▓ ░ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ▓ ░ ░ ░ ░ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . □ . □ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . . . . ░ ░ . . ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . . . . ░ . . ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . . . ░ ░ . . ■ ░ . . ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ . . . ░ ░ . . . . . . ░ . . ░ ░ ▓ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . . ░ . . . ▓ . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . . ░ . . . . . . ■ . ░ ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . . ░ □ . ░ . . □ . . ░ ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ░ ░ . . ■ . . . . ■ ░ ░ . . ░ ░ ■ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . □ ░ . . . . . . . . ░ ░ . . ░ ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ░ . . . . . . . . ░ . . . ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ▓ . . . ░ . . . . . . . ░ ░ . . ░ . P □ ░ ░ . . ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ■ . . . . . . . . . . ░ ░ . □ ░ . . . ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
■ . . . ░ . . . . . . . ░ . . ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ . . . . . . ░ . . ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . ░ . □ ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ■ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . ░ . . ░ . . ■ . . ░ ░ ░ ░ ░ . . . □ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . □ . . . ░ . . ░ . . . . ░ ░ ░ ░ ░ ░ . . . . . . ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ■ . . . . . □ . ░ □ . . □ ░ ░ ░ ░ ░ . . . . . . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. P . . . . . . . . ░ . . . . ░ ░ ░ ░ . . . . . . . . . □ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . ■ . ░ . . . . ░ ░ ░ . . . . . . . . . . ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . □ □ . . ■ . . . ░ ░ ░ ░ . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . ░ ░ ░ . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ . □ . . . □ ░ ■ . . . . . . . ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . □ . . . □ . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ . □ . ■ . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . . . . . ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . ■ ■ . . . ■ ░ . . . . . . . . . . ■ ▓ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. P . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . P . . . . . . . . . . □ . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
";
            string expectedFov3MapString = @"
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . □ . □ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . . . . ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . . . . ░ . . ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . . . ░ ░ . . ■ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . . . ░ ░ . . . . . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . . ░ . . . ░ . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . . ░ . . . . . . ■ . ░ ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . . ░ □ . ░ . . □ . . ░ ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . ░ ░ . . ■ . . . . ■ ░ ░ . . ░ ░ ■ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . □ ░ . . . . . . . . ░ ░ . . ░ ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . ░ . . . . . . . . ░ . . . ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . ░ . . . . . . . ░ ░ . . ░ . P □ ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ■ . . . . . . . . . . ░ ░ . □ ░ . . . ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ 
■ . . . ░ . . . . . . . ░ . . ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ . . . . . . ░ . . ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . ░ . □ ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ■ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . ░ . . ░ . . ■ . . ░ ░ ░ ░ ░ . . . □ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
. . . . . □ . . . ░ . . ░ . . . . ░ ░ ░ ░ ░ ░ . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
. . . ■ . . . . . □ . ░ □ . . □ ░ ░ ░ ░ ░ . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ 
. P . . . . . . . . ░ . . . . ░ ░ ░ ░ . . . . . . . . . □ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ 
. . . . . . . ■ . ░ . . . . ░ ░ ░ . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . □ □ . . ■ . . . ░ ░ ░ ░ . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . ░ ░ ░ . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
. . . □ . □ . . . □ ░ ■ . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . □ . . . □ . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ . □ . ■ . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . . ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ░ ░ ░ ▓ 
. . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . . . . . ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
. . . . . . . . . ■ ■ . . . ■ ░ . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . ■ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ 
. P . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . P . . . . . . . . . . □ . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ 
";
            string expectedTeamFovMapString = @"
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ▓ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ▓ ▓ ░ ░ ░ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ▓ ░ ░ ▓ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ▓ ░ ▓ ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ▓ ▓ ░ ▓ ░ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ▓ ░ ░ ░ ░ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . □ . □ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . . . . ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . . . . ░ . . ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . . . ░ ░ . . ■ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ . . . ░ ░ . . . . . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . . ░ . . . ░ . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . . ░ . . . . . . ■ . ░ ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . . ░ □ . ░ . . □ . . ░ ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . ░ ░ . . ■ . . . . ■ ░ ░ . . ░ ░ ■ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . □ ░ . . . . . . . . ░ ░ . . ░ ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . ░ . . . . . . . . ░ . . . ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ . . . ░ . . . . . . . ░ ░ . . ░ . P □ ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ■ . . . . . . . . . . ░ ░ . □ ░ . . . ░ ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ 
■ . . . ░ . . . . . . . ░ . . ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ . . . . . . ░ . . ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . ░ . □ ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ■ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . ░ . . ░ . . ■ . . ░ ░ ░ ░ ░ . . . □ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
. . . . . □ . . . ░ . . ░ . . . . ░ ░ ░ ░ ░ ░ . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
. . . ■ . . . . . □ . ░ □ . . □ ░ ░ ░ ░ ░ . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ 
. P . . . . . . . . ░ . . . . ░ ░ ░ ░ . . . . . . . . . □ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ▓ ▓ ▓ ▓ 
. . . . . . . ■ . ░ . . . . ░ ░ ░ . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . □ □ . . ■ . . . ░ ░ ░ ░ . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . ░ ░ ░ . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
. . . □ . □ . . . □ ░ ■ . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . □ . . . □ . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ . □ . ■ . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . . ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ░ ░ ░ ▓ 
. . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . . . . . ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
. . . . . . . . . ■ ■ . . . ■ ░ . . . . . . . . . . ■ ▓ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . ■ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ 
. P . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . P . . . . . . . . . . □ . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ 
";
            Assert.AreEqual(expectedFov1MapString, fov1MapString);
            Assert.AreEqual(expectedFov2MapString, fov2MapString);
            Assert.AreEqual(expectedFov3MapString, fov3MapString);
            Assert.AreEqual(expectedTeamFovMapString, teamFovMapstring);

        }

        [TestMethod]
        public void TeamFOVMovementTest()
        {
            //Arrange
            int xMax = 50;
            int zMax = 50;
            Mission mission = new Mission
            {
                Map = MapCore.InitializeMap(xMax, 1, zMax)
            };
            List<int> MapRandomNumbers = RandomNumber.GenerateRandomNumberList(0, xMax - 1, 0, xMax * zMax * 5);
            Queue<int> MapNumberQueue = new Queue<int>(MapRandomNumbers);
            //Add 100 full cover items randomly
            for (int i = 0; i < 100; i++)
            {
                int x = MapNumberQueue.Dequeue();
                int z = MapNumberQueue.Dequeue();
                mission.Map[x, 0, z] = CoverType.FullCover;
            }
            //Add 100 half cover items randomly
            for (int i = 0; i < 100; i++)
            {
                int x = MapNumberQueue.Dequeue();
                int z = MapNumberQueue.Dequeue();
                mission.Map[x, 0, z] = CoverType.HalfCover;
            }
            Character fred = CharacterPool.CreateFredHero(mission.Map, new Vector3(1, 0, 1));
            Character harry = CharacterPool.CreateHarryHeroSidekick(mission.Map, new Vector3(0, 0, 1));
            fred.MobilityRange = 16;
            harry.MobilityRange = 16;
            Team team1 = new Team()
            {
                Name = "Good guys",
                Characters = new List<Character>() { fred, harry }
            };
            mission.Teams.Add(team1);
            Character jethro = CharacterPool.CreateJethroBaddie(mission.Map, new Vector3(19, 0, 19));
            Team team2 = new Team()
            {
                Name = "Bad guys",
                Characters = new List<Character>() { jethro }
            };
            mission.Teams.Add(team2);

            //Assert - Setup
            Assert.AreEqual(Mission.MissionType.EliminateAllOpponents, mission.Objective);
            Assert.AreEqual(1, mission.TurnNumber);
            Assert.AreEqual(2, mission.Teams.Count);
            Assert.AreEqual(50 * 50, mission.Map.Length);
            Assert.AreEqual("Good guys", mission.Teams[0].Name);
            Assert.AreEqual(2, mission.Teams[0].Characters.Count);
            Assert.AreEqual("Bad guys", mission.Teams[1].Name);
            Assert.AreEqual(1, mission.Teams[1].Characters.Count);
            Assert.AreEqual(8, mission.RandomNumbers.Queue[0]);

            //Check before we move
            FieldOfView.UpdateCharacterFOV(mission.Map, fred);
            string fov0MapString = MapCore.GetMapStringWithMapMask(mission.Map, fred.FOVMap);
            string expectedFov0MapString = @"
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . ■ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ ▓ □ . . ▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ ▓ . . . ▓ ▓ . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . . ■ ▓ ▓ ▓ ▓ ▓ . . ▓ ▓ ▓ . . . ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ . . . ▓ ▓ . . . . ▓ ■ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ . . . ▓ ▓ . . . ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ . . ▓ ▓ ▓ . . . ▓ . ▓ ▓ ▓ ▓ ▓ . ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ . . ▓ ▓ . . . ▓ . . ▓ ▓ ▓ ▓ . ■ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . . ▓ ▓ ■ . . . ▓ ▓ . . . . . ▓ ▓ ▓ ▓ . □ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . □ . ▓ ▓ . . . ▓ ▓ . . . ▓ . . ▓ ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ▓ ▓ ▓ . . . ▓ ▓ . . . . . ▓ ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ . ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ▓ ▓ ▓ . . . ▓ . . . ▓ . . ▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ . ▓ □ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ▓ ▓ . . . ▓ ▓ . . . . . ▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ . ■ . ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ▓ ▓ . . . ▓ ▓ . . ▓ . ▓ ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ . . . ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ▓ ▓ . . . ▓ . . . . . ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ . . . ▓ ▓ . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ▓ ▓ . . ▓ ▓ . . ■ . ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ . . □ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ▓ . □ . ■ . . □ . . ▓ ▓ . . . ▓ ▓ ▓ . . . ▓ ▓ . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . . ▓ . . . ■ . . . . ■ ▓ ■ . . ▓ ▓ ■ . . . ▓ . □ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . ▓ ▓ . . . . . . . . ▓ . . . ▓ ▓ . . . . ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ . . ▓ ▓ . . . . . . . ▓ ▓ . . ▓ ▓ . . . . ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
■ ▓ . . ▓ . . . . . . . . ▓ . . ▓ ▓ . P □ . ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. ■ . . ▓ . . . . . . . ▓ . . □ ▓ . . . ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
■ . . . ▓ . . . . . . . ▓ . . ▓ . . . ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ▓ . . . . . . ▓ . . ▓ . . . ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ . . . . □ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . ▓ . □ ▓ . . . ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ■ . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . ▓ . . . ■ . . ▓ ▓ ▓ ▓ ▓ . . . □ . . . . . ▓ ▓ ▓ ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ▓ . □ . . . ▓ . . . . . . . . ▓ ▓ ▓ ▓ . . . . . . . . . ▓ ■ ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ■ . . . . . □ . . □ . . □ ▓ ▓ ▓ ▓ ▓ . . . . . . . . ■ . □ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . ▓ ▓ ▓ ▓ . . . . . . . . . □ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . ■ . ▓ . . . . ▓ ▓ ▓ . . . . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . □ □ . . ■ . . . ▓ ▓ ▓ . . . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . ▓ ▓ . . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ . □ . . . □ ▓ ■ . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . □ . . . □ . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ . □ . ■ . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . ■ ■ ▓ . . ■ ▓ ▓ . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
P P . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . □ . □ . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
";
            Assert.AreEqual(expectedFov0MapString, fov0MapString);

            Vector3 location = new Vector3(18, 0, 0);
            PathFindingResult pathFindingResult = PathFinding.FindPath(fred.Location, location, mission.Map);
            CharacterMovement.MoveCharacter(fred, mission.Map, pathFindingResult, mission.RandomNumbers, null, team1);

            string fov1MapString = MapCore.GetMapStringWithMapMask(mission.Map, fred.FOVMap);
            string expectedFov1MapString = @"
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . ░ . ░ . . ░ ░ ░ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ . ░ ░ ░ ░ ░ ░ ░ ░ . . ░ . ░ . □ ░ ░ ▓ . ░ . . □ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ░ . ░ ░ ░ ░ ░ ░ ░ □ . ░ . ░ . . ░ ░ ▓ . . . . . ░ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . ░ ░ ░ ░ ░ ░ . ░ ░ ░ ░ ░ ░ ░ . . ░ . ▓ . . ░ ░ . ░ . . . . ░ ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ░ ░ ░ ░ ░ . ░ ░ ░ ░ ▓ ░ ░ . . ░ . ▓ . . ░ ░ . ░ . . . . ░ . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ░ ░ ░ ░ ░ . ░ ░ ░ ░ ▓ ░ ░ . . ░ . ■ . ░ ░ ░ . ░ . . . ░ ░ . . . ■ ░ ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ ░ ■ ░ ░ . ░ ░ ░ ░ ░ ░ . . ░ . . . ░ ░ ░ . . □ . . ░ ░ . . . . ░ ▓ . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. □ . . ░ ░ . ░ ░ . ░ ░ ░ ░ ░ ░ . . ░ . . . ░ ░ ░ . . . . . ■ . . . . ░ ░ ░ . ▓ ░ ▓ ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ░ ░ . ░ . ░ ░ ░ ░ ░ ░ . . ░ . □ . ░ ░ . ■ . □ . . ░ . . . . ░ ░ . ░ ░ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ░ ░ . ■ . ░ ░ ░ ░ ░ ░ . . ░ . □ . ░ ░ □ . . . . . □ . . . ░ ░ ▓ . ░ ■ . □ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . □ . ░ ░ . ░ . ■ ░ ░ ░ ░ ░ . ░ . . . ░ ░ . . . . . ░ . . . . ░ ░ . ░ . ▓ . ■ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ░ ░ . . . . ░ ░ ░ ░ ░ . ░ . . . ░ ░ . . . . . ░ . . . ░ ░ . ░ ░ . . . ░ ░ ▓ ░ ░ ▓ ▓ ▓ ▓ 
. . . . . . ░ ░ . . . . ░ ░ ░ ░ ░ . ░ . . . ░ ░ □ □ . . . . □ . . ░ ▓ . ░ . . . . ░ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ 
□ . . . . . . ░ ░ . ■ . ░ ░ ░ ░ ░ . ░ . . . ░ . . . . . ■ . . □ ░ ▓ . ░ . ■ . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ 
. . . . . . . ░ ░ . . . . ░ ░ ░ ░ . ░ . . . ░ . . . . . . . . . ▓ ▓ . ▓ . . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ 
. . . . . . . . ░ . . . . ░ ░ ░ ░ . ■ . . ░ ░ . . . . . . . . ░ ▓ . ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ▓ 
. . . . . . . . ░ ░ . . . ■ ░ ░ ░ . . . . ░ ░ . . . □ . . . . ▓ . ░ . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ 
. . . . . . . □ . ■ . . □ . ░ ░ ░ . . . . ░ ■ . . . . . . . ░ ■ . ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ . 
. . . . . . . . . ■ . . . . ■ ░ ■ . . . . ■ . . . . . □ . . ░ . ■ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ . . . 
□ . . . □ . . . . . . . . . . ░ . . . . . . . . . . . . . ░ . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ . . . . 
. . . . . . . . . . . . . . . ░ . . . . . . . . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ▓ . . . . . 
░ . . . . . . . . . . . . . . ░ . . . P □ . . . . . . . ░ . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ . . . . . . . 
░ ░ . . . . . . . . . . . . . ░ . . . . . . . . . . . . . . . . □ ░ ░ ░ ░ ░ ░ ░ ░ ▓ . . . . . . . . 
░ ░ ░ . . . . . . . . . . . . . . . . . . . . . . . . ░ . . . . ░ ░ ░ ░ ░ ▓ ░ ░ ░ □ . . □ . . . . . 
░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . □ . . . . . . ░ ░ ░ ░ ░ ░ ░ ▓ . . . . . . □ . . . ▓ 
░ ░ ░ ░ ░ . . . . . . . □ . . . ░ . . . . . . . . . ■ . . . . ░ ░ ■ ░ ░ ░ ■ . . . . □ . . . . ▓ . . 
░ ░ ░ ░ ░ . . . . . . . . . . . ■ . . . . . . . . . . □ . . ░ ░ . ░ ░ ░ . . . . . . . . □ ■ . . ▓ ▓ 
░ ░ ░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . . . . ░ ░ . ■ ░ ░ . . . . . . . . . . . ░ ░ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ . . □ . . □ . . □ . . . . . . . . . . . . ░ ■ . □ ░ . . . . . . . . . . . ░ ░ ▓ ▓ ░ ░ 
. ░ ░ ░ ░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . □ . . ░ . . . . □ . . . . . ░ ▓ ▓ ░ ░ ░ ░ ░ 
. . . ░ ░ ░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . . ■ . □ . . . . . . . ░ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ 
. . . . □ ░ ░ ░ ■ ░ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ■ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ 
░ ░ . . . . ░ ░ ░ . ░ . . . . . . . . . . . . . . ░ . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ 
░ ░ ░ ░ . □ . . ░ ░ . ■ . . . . . . . . . . . . ■ □ . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ 
░ ░ ░ ░ ░ ░ . . □ . ░ . □ . . . . . . . . . . . . . □ . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ■ . . . ░ . . . . . . . . . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ . . □ . 
. . . ░ ░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ . . . . . . ▓ ▓ ▓ ▓ 
. . . . . . . ░ ░ ■ ■ . . . ■ . . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ . . . . . . . ■ ▓ ▓ . . . ■ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . ■ ░ . . . . . . . . . . . . . . . . . . . . . . 
P . . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . . . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . P . . . . . . . . . . □ . □ . . . . . . . . . . . . . . . . ■ ▓ 
";
            Assert.AreEqual(expectedFov1MapString, fov1MapString);


            Vector3 location2 = new Vector3(2, 0, 18);
            PathFindingResult pathFindingResult2 = PathFinding.FindPath(harry.Location, location2, mission.Map);
            CharacterMovement.MoveCharacter(harry, mission.Map, pathFindingResult2, mission.RandomNumbers, null, team1);

            string fov2MapString = MapCore.GetMapStringWithMapMask(mission.Map, harry.FOVMap);
            string expectedFov2MapString = @"
. . . ▓ . ▓ . ▓ ▓ ░ ▓ ▓ . . ▓ . ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ▓ . ▓ . ▓ ░ ░ ▓ ▓ . . ■ . ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ □ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ▓ . ▓ . ▓ ░ ░ ▓ . . . . ░ ▓ ░ . . ░ ▓ ▓ ▓ ░ . ░ ▓ ▓ ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ▓ . ▓ . ▓ ░ ▓ ░ . . . . ░ ■ . . ░ ▓ ▓ ▓ ░ ░ . ░ ░ ░ ■ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ▓ . . ▓ ░ ░ ░ ■ . . . ░ ░ . . . ■ ▓ ▓ ░ ░ . ░ ░ ░ . □ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ■ . . ░ ░ ░ ░ □ . . . ░ . . . . . ▓ ░ ░ . ░ ░ ░ . . ▓ . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . □ . ░ ░ ░ □ . . . ░ ░ . . . . ▓ ░ ░ . ░ ░ ░ . . ▓ . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . □ ▓ ░ ░ . . . . ░ . . . . ░ ▓ ░ . ░ ░ ░ □ . ░ . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ■ . ░ ░ ░ . . . . ░ □ . . . ▓ ░ ░ . ░ ░ . . ░ . . . . ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ░ ░ . . . . ░ . . . . ▓ ▓ ░ . ░ ░ . . ░ . . . . ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ░ ░ . . . . ░ . . . . ▓ ░ . ░ ░ □ . ░ . . □ . ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ░ ░ . . . ░ . . . . ▓ ░ . ░ ░ . . ░ . . . . ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ░ ░ ░ . . . ░ . . . ▓ ▓ . ░ ░ . . ░ . . . ▓ ░ ░ ░ ░ ▓ ░ ░ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ■ ░ . . . . . . . . ▓ ░ . ░ . . ░ . . . ▓ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ░ . . . ░ . . . ▓ ░ . ░ . . ■ . . . ■ ░ ░ ░ ░ ▓ ░ ░ ░ ▓ ▓ ░ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ■ . . . . . . ■ ░ . ░ . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. □ . . . . . . . ░ . . . ▓ . ░ ░ . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . . ▓ ▓ ▓ ░ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . ░ . ░ ░ . . . . □ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . . ░ ░ ░ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . ■ . . . . ░ ░ . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ . . □ ░ ░ ░ . . ▓ ▓ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . □ . □ . . . . ■ . ░ . . . . ░ ░ ░ ░ ░ ░ ░ ░ . . . ░ ░ . . . ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . ░ . . . . ░ ░ ░ ░ ░ ░ ░ . . . ░ ░ . . ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . ░ . . . . ░ ░ ░ ░ ░ ░ . . □ ░ . . . ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
□ . . . . . . . . . ■ . . . ░ ░ ░ ░ ░ ░ . . . ░ . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . ░ ░ ░ ░ ░ . . ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . ░ ░ ░ ░ . . ■ . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . ░ ░ ░ . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . □ . ■ ░ ░ □ . . . ░ ░ ░ ░ ░ . ■ ░ ░ ░ ░ ░ . . ■ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . ■ . . . . ■ . ■ . . . . ■ ░ . . . . □ . . . . ■ ░ ░ ░ ░ ░ . □ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
□ . . . □ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
■ . . . . . . . . . . . . . . . . . . P □ . . . . . . . . . . . . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ■ P . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . □ . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
■ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . □ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . □ . . . . . . . . □ . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . □ . . . . . . . . . . . . . ■ ░ . . . . . ■ ░ ░ . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . ■ . . . . . . . . . . □ . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . □ . . . . . . . . . . . . . ░ ░ . . . . . . . . . . . ■ . . . . . . ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ■ . . . . . □ . . □ . . □ . . . . . . . ░ ░ . . . . ■ . □ . . . ░ ░ ░ ░ . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ░ . . . . . . . . . . . . . . . . . . . . . . ░ ░ ░ . . . . ░ ░ . □ . . . ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ░ . . . ■ . . . . . . . . . . . . . . . . . . . . . ░ ░ ░ ░ . . . . ░ ░ ░ ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ □ . . ░ . . . . . . . . . . . . . . . . . . . . . . . ░ ░ ░ ░ ░ . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ ░ □ . . . ░ . ■ . . . . . . . . . . . . ■ □ . . . . . . . . . . . . ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ . . . □ . ░ . ░ . . . . . . . . . . . . . ░ . . . . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . □ ░ ░ . ■ . . ░ . ░ ░ . . . . . . . . . . . . . . ░ . . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ ░ . . . . . ░ . ░ . . . . . . . . . . . . . . . . ░ . . ■ . □ . . . ■ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ ░ . . ░ ■ ■ ░ ░ . ░ . . . . . . . . . . . ■ . . . . . ░ . . ░ ░ . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ ░ . . ░ ░ ░ ░ ░ ░ . ░ . . . . . . . . . . ■ ▓ . . . . . . ░ . . ░ ░ . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ ░ ░ . . ░ ░ ░ ░ ░ . ░ ░ . . . . . . . . . . . ░ ░ . . . . . . ░ . . ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ ░ ░ . . ░ ░ ░ ░ ░ ░ . ░ ░ P . . . . . . . . . . ░ ░ ░ . . . . . ░ ░ . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
";
            Assert.AreEqual(expectedFov2MapString, fov2MapString);


            //Double check that Fred's FOV is still the same
            fov1MapString = MapCore.GetMapStringWithMapMask(mission.Map, fred.FOVMap);
            expectedFov1MapString = @"
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ . . ░ . ░ . . ░ ░ ░ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ . ░ ░ ░ ░ ░ ░ ░ ░ . . ░ . ░ . □ ░ ░ ▓ . ░ . . □ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ░ . ░ ░ ░ ░ ░ ░ ░ □ . ░ . ░ . . ░ ░ ▓ . . . . . ░ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . ░ ░ ░ ░ ░ ░ . ░ ░ ░ ░ ░ ░ ░ . . ░ . ▓ . . ░ ░ . ░ . . . . ░ ▓ . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ░ ░ ░ ░ ░ . ░ ░ ░ ░ ▓ ░ ░ . . ░ . ▓ . . ░ ░ . ░ . . . . ░ . . . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ░ ░ ░ ░ ░ . ░ ░ ░ ░ ▓ ░ ░ . . ░ . ■ . ░ ░ ░ . ░ . . . ░ ░ . . . ■ ░ ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ░ ░ ■ ░ ░ . ░ ░ ░ ░ ░ ░ . . ░ . . . ░ ░ ░ . . □ . . ░ ░ . . . . ░ ▓ . ░ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. □ . . ░ ░ . ░ ░ . ░ ░ ░ ░ ░ ░ . . ░ . . . ░ ░ ░ . . . . . ■ . . . . ░ ░ ░ . ▓ ░ ▓ ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ░ ░ . ░ . ░ ░ ░ ░ ░ ░ . . ░ . □ . ░ ░ . ■ . □ . . ░ . . . . ░ ░ . ░ ░ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ░ ░ . ■ . ░ ░ ░ ░ ░ ░ . . ░ . □ . ░ ░ □ . . . . . □ . . . ░ ░ ▓ . ░ ■ . □ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . □ . ░ ░ . ░ . ■ ░ ░ ░ ░ ░ . ░ . . . ░ ░ . . . . . ░ . . . . ░ ░ . ░ . ▓ . ■ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ░ ░ . . . . ░ ░ ░ ░ ░ . ░ . . . ░ ░ . . . . . ░ . . . ░ ░ . ░ ░ . . . ░ ░ ▓ ░ ░ ▓ ▓ ▓ ▓ 
. . . . . . ░ ░ . . . . ░ ░ ░ ░ ░ . ░ . . . ░ ░ □ □ . . . . □ . . ░ ▓ . ░ . . . . ░ ▓ ░ ░ ░ ▓ ▓ ▓ ▓ 
□ . . . . . . ░ ░ . ■ . ░ ░ ░ ░ ░ . ░ . . . ░ . . . . . ■ . . □ ░ ▓ . ░ . ■ . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ 
. . . . . . . ░ ░ . . . . ░ ░ ░ ░ . ░ . . . ░ . . . . . . . . . ▓ ▓ . ▓ . . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ 
. . . . . . . . ░ . . . . ░ ░ ░ ░ . ■ . . ░ ░ . . . . . . . . ░ ▓ . ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ░ ▓ 
. . . . . . . . ░ ░ . . . ■ ░ ░ ░ . . . . ░ ░ . . . □ . . . . ▓ . ░ . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ 
. . . . . . . □ . ■ . . □ . ░ ░ ░ . . . . ░ ■ . . . . . . . ░ ■ . ░ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ . 
. . . . . . . . . ■ . . . . ■ ░ ■ . . . . ■ . . . . . □ . . ░ . ■ . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ . . . 
□ . . . □ . . . . . . . . . . ░ . . . . . . . . . . . . . ░ . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ . . . . 
. . . . . . . . . . . . . . . ░ . . . . . . . . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ▓ ░ ░ ▓ . . . . . 
░ . . . . . . . . . . . . . . ░ . . . P □ . . . . . . . ░ . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ▓ . . . . . . . 
░ ░ P . . . . . . . . . . . . ░ . . . . . . . . . . . . . . . . □ ░ ░ ░ ░ ░ ░ ░ ░ ▓ . . . . . . . . 
░ ░ ░ . . . . . . . . . . . . . . . . . . . . . . . . ░ . . . . ░ ░ ░ ░ ░ ▓ ░ ░ ░ □ . . □ . . . . . 
░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . □ . . . . . . ░ ░ ░ ░ ░ ░ ░ ▓ . . . . . . □ . . . ▓ 
░ ░ ░ ░ ░ . . . . . . . □ . . . ░ . . . . . . . . . ■ . . . . ░ ░ ■ ░ ░ ░ ■ . . . . □ . . . . ▓ . . 
░ ░ ░ ░ ░ . . . . . . . . . . . ■ . . . . . . . . . . □ . . ░ ░ . ░ ░ ░ . . . . . . . . □ ■ . . ▓ ▓ 
░ ░ ░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . . . . ░ ░ . ■ ░ ░ . . . . . . . . . . . ░ ░ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ . . □ . . □ . . □ . . . . . . . . . . . . ░ ■ . □ ░ . . . . . . . . . . . ░ ░ ▓ ▓ ░ ░ 
. ░ ░ ░ ░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . □ . . ░ . . . . □ . . . . . ░ ▓ ▓ ░ ░ ░ ░ ░ 
. . . ░ ░ ░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . . ■ . □ . . . . . . . ░ ▓ ▓ ░ ░ ░ ░ ░ ░ ░ 
. . . . □ ░ ░ ░ ■ ░ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ■ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ 
░ ░ . . . . ░ ░ ░ . ░ . . . . . . . . . . . . . . ░ . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ 
░ ░ ░ ░ . □ . . ░ ░ . ■ . . . . . . . . . . . . ■ □ . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ 
░ ░ ░ ░ ░ ░ . . □ . ░ . □ . . . . . . . . . . . . . □ . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ 
░ ░ ░ ░ ░ ░ ░ ■ . . . ░ . . . . . . . . . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ . . □ . 
. . . ░ ░ ░ ░ ░ . . . . . . . . . . . . . . . . . . . . ░ ░ ░ ░ ░ ░ ▓ ▓ ▓ ▓ ▓ ▓ . . . . . . ▓ ▓ ▓ ▓ 
. . . . . . . ░ ░ ■ ■ . . . ■ . . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ . . . . . . . ■ ▓ ▓ . . . ■ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . ■ ░ . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . . . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . P . . . . . . . . . . □ . □ . . . . . . . . . . . . . . . . ■ ▓ 
";
            Assert.AreEqual(expectedFov1MapString, fov1MapString);

            FieldOfView.UpdateTeamFOV(mission.Map, mission.Teams[0]);
            string teamFovMapString = MapCore.GetMapStringWithMapMask(mission.Map, mission.Teams[0].FOVMap);
            string expectedFovMapString = @"
. . . ▓ . ▓ . ▓ ▓ . ▓ ▓ . . ▓ . ▓ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ▓ . ▓ . ▓ . . ▓ ▓ . . ■ . ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ □ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ▓ . ▓ . ▓ . . ▓ . . . . . ▓ . . . ■ ▓ ▓ ▓ ■ . . ▓ ▓ ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ▓ . ▓ . ▓ . ▓ . . . . . . ■ . . . ▓ ▓ ▓ . . . . . . ■ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ▓ . . ▓ . . . ■ . . . . . . . . ■ ▓ ▓ . . . . . . . □ ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . ■ . . ■ . . . □ . . . . . . . . . ▓ □ . . . . . . . ▓ . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . □ . . . . □ . . . . . . . . . ▓ . . . . . . . . ▓ . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . □ ▓ . . . . . . . . . . . . ▓ . . . . . □ . . . . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . ■ . . . . . . . . . □ . . . . . . . . . . . . . . . . ▓ ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . □ . . . . □ . . □ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . □ . . . . □ . . . . . . . . . . . . . . . ▓ . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . □ . . . . . . . . . . . . . . . . . . . . . . . ■ . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . ■ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ▓ ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . ■ . . . ■ . . . . . . ■ . . . ■ . . . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . ■ . . . . . . ■ . . . . . . . . . . . . . □ . . . . . . . . . ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. □ . . . . . . . . . . . . . . . . . . . . . . . . . . . . ■ . . . . . . . . . . ▓ ■ ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . □ . . . . ■ . □ . . . . . . . . . . . . ▓ . . ▓ ▓ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . ■ . . . . . . . . . . . □ . . . □ . . . . . □ . . . . . ▓ . . ■ . □ . . . ▓ ▓ ▓ ▓ ▓ 
. . . . □ . □ . . . . ■ . . . . . . . . . . . . . . . . . . . . . . . . . . . ▓ . ■ . . . ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . . . . . . . . . ▓ . . ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . □ □ . . . . □ . . . . . . . . . . . ▓ . . . ▓ ▓ ▓ ▓ 
□ . . . . . . . . . ■ . . . . . . . . . . . . . . . . . ■ . . □ . ■ . . . ■ . . . ■ . . . . . . ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . □ . . □ . . . ▓ ▓ . 
. . . . . . . . . . . . . . . . . . ■ . . . . . . . . . . . . ■ . . ■ . . . □ . □ . . . . . ▓ ▓ . ▓ 
. . . . . . . . . . . . . ■ . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . . . . . . ▓ ▓ 
. . . . . . . □ . ■ . . □ . . . . . . . . . ■ . . . . . . . ■ ■ . . . . . □ . . . . . . . . ▓ ▓ ▓ . 
. . . . . . . . . ■ . . . . ■ . ■ . . . . ■ . . . . . □ . . . . ■ . . . . . . □ . . . □ . ▓ ▓ . . . 
□ . . . □ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ■ ▓ . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ▓ . . . . . 
■ . . . . . . . . . . . . . . . . . . P □ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. ■ P . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . . 
■ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . □ . . □ . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . □ . . . . . . . . □ . . . . . . . . . . . □ . . . ▓ 
. . . . . . . . . . . . □ . . . . . . . . . . . . . ■ . . . . . . ■ . . . ■ . . . . □ . . . . ▓ . . 
. . . . . . . . . . . . . . . . ■ . . . . . . . . . . □ . . . . . . . . . . . . . . . . □ ■ . . ▓ ▓ 
. . . . . □ . . . . . . . . . . . . . . . . . . . . . . . . . . ■ . . . . . . . . . . . . . □ ■ ▓ ▓ 
. . . ■ . . . . . □ . . □ . . □ . . . . . . . . . . . . . ■ . □ . . . . . . . . . . . . . . ▓ ▓ . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . □ . . . . . . . □ . . . . . □ ▓ ▓ . . . . . 
. . . . . . . ■ . . . . . . . . . . . . . . . . . . . . . . ■ . □ . . . . . . . ■ ▓ ▓ . . . . . . . 
. . . . □ □ . . ■ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ■ . . . . . . □ . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . □ . . . . . . 
. . . □ . □ . . . □ . ■ . . . . . . . . . . . . ■ □ . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . □ . . . □ . . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . . . . ▓ ▓ ▓ ▓ 
. . . □ . □ . ■ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ▓ ▓ ▓ ▓ ▓ . . □ . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ■ . □ . . . ■ . . . . . . ▓ ▓ ▓ ▓ 
. . . . . . . . . ■ ■ . . . ■ . . . . . . . . . . . ■ . . . . . □ . . . . . . . . ■ ▓ ▓ . . . ■ ▓ ▓ 
. . . . . . . . . . . . . . . . . . . . . . . . . . ■ . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . □ . . . . . . . . . . . . . . . . . . . . . . . . . . . ■ ▓ ▓ ▓ ▓ ▓ 
. . . . . . . . . . . . . . . . . . P . . . . . . . . . . □ . □ . . . . . . . . . . . . . . . . ■ ▓ 
";
            Assert.AreEqual(expectedFovMapString, teamFovMapString);
        }

    }
}
